(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{9916:(e,t,a)=>{Promise.resolve().then(a.bind(a,4658))},4658:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var r=a(5155),n=a(2115),s=a(9159),l=a.n(s),c=a(830),o=a(5370),d=a(960);let i=e=>{let t=l().parse(e,{header:!0,skipEmptyLines:!0}).data.filter(e=>e.Day&&e.Start&&e.End).map(e=>{try{let t=(0,c.qg)(e.Day.trim(),"dd/MM/yyyy",new Date);if(isNaN(t.getTime()))return console.warn("Fecha inv\xe1lida:",e.Day),null;let a=(0,o.k)(t,{weekStartsOn:1});return{...e,Day:(0,d.GP)(t,"yyyy-MM-dd"),Week:(0,d.GP)(a,"yyyy-MM-dd")}}catch(t){return console.error("Error al procesar entrada:",e,t),null}}).filter(e=>null!==e);t.sort((e,t)=>{let a=new Date(e.Day).getTime()-new Date(t.Day).getTime();return 0!==a?a:e.Start.localeCompare(t.Start)});let a={};return t.forEach(e=>{a[e.Week]||(a[e.Week]=[]),a[e.Week].push(e)}),a},b=()=>{let e=[];for(let t=8;t<21;t++)e.push("".concat(t.toString().padStart(2,"0"),":00-").concat(t.toString().padStart(2,"0"),":30")),e.push("".concat(t.toString().padStart(2,"0"),":30-").concat((t+1).toString().padStart(2,"0"),":00"));return e},m=["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes"];function h(){let[e,t]=(0,n.useState)({}),[a,s]=(0,n.useState)("");(0,n.useEffect)(()=>{fetch("https://horarios-api-cx4p.onrender.com/horario").then(e=>e.text()).then(e=>{t(i(e));let a=new Date,r=a.getDay(),n=new Date(a);n.setDate(a.getDate()-(r+6)%7),s(n.toISOString().split("T")[0])})},[]);let l=e=>{"ArrowLeft"===e.key?c(-1):"ArrowRight"===e.key&&c(1)};(0,n.useEffect)(()=>(window.addEventListener("keydown",l),()=>{window.removeEventListener("keydown",l)}),[a,e]);let c=t=>{let r=Object.keys(e),n=r.indexOf(a)+t;n>=0&&n<r.length&&s(r[n])},o=b();return(0,r.jsxs)("div",{className:"mt-32 p-4",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center mb-4",children:[(0,r.jsxs)("h1",{className:"text-xl font-bold mb-4",children:["Semana del ",a]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("button",{onClick:()=>c(-1),className:"bg-blue-500 text-white px-3 py-1 rounded mr-2 hover:bg-blue-700 text-sm ".concat(a===Object.keys(e)[0]?"opacity-50 cursor-not-allowed":""),children:"Previous Week"}),(0,r.jsx)("button",{onClick:()=>c(1),className:"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-700 text-sm ".concat(a===Object.keys(e)[Object.keys(e).length-1]?"opacity-50 cursor-not-allowed":""),children:"Next Week"})]})]}),(0,r.jsxs)("table",{className:"min-w-full bg-white border border-black text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"py-1 px-2 border-b border-black",children:"Time"}),m.map(e=>(0,r.jsxs)("th",{className:"py-1 px-2 border-b border-black",children:[e," ",(0,r.jsx)("span",{className:"text-divs-300",children:new Date(new Date(a).setDate(new Date(a).getDate()+m.indexOf(e))).getDate()})]},e))]})}),(0,r.jsx)("tbody",{children:o.map((t,n)=>(0,r.jsxs)("tr",{className:"",children:[(0,r.jsx)("td",{className:"py-1 px-2 max-w-3 border border-black",children:t}),m.map((n,s)=>{var l,c;let o=null===(l=e[a])||void 0===l?void 0:l.filter(e=>new Date(e.Day).getDay()===s+1&&e.Start===t.split("-")[0]);if(o&&o.length>0){let e=o[0],t=new Date("1970-01-01T".concat(e.Start,":00")),a=Math.ceil((new Date("1970-01-01T".concat(e.End,":00")).getTime()-t.getTime())/18e5);return(0,r.jsxs)("td",{rowSpan:a,className:"py-1 px-2 text-center max-w-10 align-middle font-semibold border border-black ".concat(e.Room.toLowerCase().includes("ex")?"bg-red-300":"bg-divs-100"),children:[e.Subject," ",(0,r.jsx)("br",{})," ",e.Room]},s)}return(null===(c=e[a])||void 0===c?void 0:c.some(e=>{let a=new Date(e.Day),r=new Date("1970-01-01T".concat(e.Start,":00")),n=new Date("1970-01-01T".concat(e.End,":00"));return a.getDay()===s+1&&r<=new Date("1970-01-01T".concat(t.split("-")[0],":00"))&&n>new Date("1970-01-01T".concat(t.split("-")[0],":00"))}))?null:(0,r.jsx)("td",{className:"py-1 px-2 border border-black"},s)})]},t))})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[205,441,517,358],()=>t(9916)),_N_E=e.O()}]);